{% extends 'components/base2.html' %}

{% block content %}

<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.0/fullcalendar.min.css" />
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/locale/th.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.0/fullcalendar.min.js"></script>
</head>

<h1 class="text-2xl font-bold text-center pt-4">เพิ่มเวลาว่าง</h1>
<div class="flex ml-[30.5cm] px-1">
    <a href="addthetime" class="rounded-full shadow-sm bg-blue-300 p-2 mr-2 hover:bg-blue-500">
        <button type="button">เพิ่มเวลาว่าง</button>
    </a>
    <a href="showAvailableTime" class="rounded-full shadow-sm bg-blue-300 p-2 hover:bg-blue-500">
        <button type="button">ลบเวลาว่าง</button>
    </a>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function () {

        moment.locale('th');

        $('#calendar').fullCalendar({
            events: 'get_freetime/',
            locale: 'th',

            eventRender: function (event, element) {

                var eventHtml = '<div class="flex items-center">';
                eventHtml += '<div class="items-center">';
                eventHtml += '<a href="addtime/' + event.id + '/"></a>';
                eventHtml += '<div class="font-bold mt-2 text-center">' + event.title + '</div>';
                eventHtml += '<div class="text-sm text-center">' + moment(event.start).format('LT') + ' - '+ moment(event.end).format('LT') + '</div>';
                eventHtml += '</div></div>';

                element.css('background-color', event.backgroundColor);  // แก้จาก element.css('#3b3b3b', event.backgroundColor);
                element.find('.fc-content').html(eventHtml);
            }
        });
    });
</script>

<div id="calendar" class="m-3 max-w-screen-md mx-auto p-4 bg-white mt-5 mb-10 rounded-lg shadow-md border-gray-500 border-2"></div>



{% endblock %}